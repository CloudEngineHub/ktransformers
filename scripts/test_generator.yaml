global_vars:
  q8: &q8 /home/dataset/int8
  q4: &q4 /home/dataset/int4
  w8a8: &w8a8 /home/dataset/w8a8
  ascend_toolkit: &toolkit /usr/local/Ascend/ascend-toolkit/set_env.sh
  atb: &atb /home/ascend/ascend-transformer-boost/output/atb/set_env.sh
  optimize_config_path: &opt_cfg ./ktransformers/optimize/optimize_rules/DeepSeek-V3-Chat-800IA2-npu.yaml

hyperparams:
  - cpu_infer: 49
    w8a8_safetensor_path: *w8a8

  - cpu_infer: 37

export_area:
  ASDOPS_LOG_TO_FILE: 0
  ASDOPS_LOG_TO_STDOUT: 0
  ASDOPS_LOG_LEVEL: ERROR
  ATB_LOG_TO_FILE: 0
  ATB_LOG_TO_STDOUT: 0
  ATB_LOG_LEVEL: ERROR
  USE_MERGE: 0

source_area:
  - *toolkit
  - *atb

torchrun_area:
  long:
    nproc_per_node: 1
  short:
    m: ktransformers.local_chat

model_area:
  cpu_infer: $cpu_infer
  model_path: $model_path
  gguf_path: *q8
  q4_gguf_path: *q4
  w8a8_safetensor_path: $w8a8_safetensor_path
  max_new_tokens: 50
  optimize_config_path: *opt_cfg
